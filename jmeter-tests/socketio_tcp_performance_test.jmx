<?xml version="1.0" encoding="UTF-8"?>
<jmeterTestPlan version="1.2" properties="5.0" jmeter="5.6.3">
  <hashTree>
    <TestPlan guiclass="TestPlanGui" testclass="TestPlan" testname="Socket.IO Performance Testing Plan (TCP)" enabled="true">
      <stringProp name="TestPlan.comments">Testing Socket.IO server performance using TCP samplers</stringProp>
      <boolProp name="TestPlan.functional_mode">false</boolProp>
      <boolProp name="TestPlan.tearDown_on_shutdown">true</boolProp>
      <boolProp name="TestPlan.serialize_threadgroups">false</boolProp>
      <elementProp name="TestPlan.user_defined_variables" elementType="Arguments" guiclass="ArgumentsPanel" testclass="Arguments" testname="User Defined Variables" enabled="true">
        <collectionProp name="Arguments.arguments">
          <elementProp name="projectId" elementType="Argument">
            <stringProp name="Argument.name">projectId</stringProp>
            <stringProp name="Argument.value">507f1f77bcf86cd799439011</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
            <boolProp name="Argument.use_equals">true</boolProp>
          </elementProp>
        </collectionProp>
      </elementProp>
      <stringProp name="TestPlan.user_define_classpath"></stringProp>
    </TestPlan>
    <hashTree>
      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="Socket.IO Performance Tests" enabled="true">
        <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>
        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControllerGui" testclass="LoopController" testname="Loop Controller" enabled="true">
          <boolProp name="LoopController.continue_forever">false</boolProp>
          <stringProp name="LoopController.loops">5</stringProp>
        </elementProp>
        <stringProp name="ThreadGroup.num_threads">20</stringProp>
        <stringProp name="ThreadGroup.ramp_time">10</stringProp>
        <longProp name="ThreadGroup.start_time">1</longProp>
        <longProp name="ThreadGroup.end_time">1</longProp>
        <boolProp name="ThreadGroup.scheduler">false</boolProp>
        <stringProp name="ThreadGroup.duration"></stringProp>
        <stringProp name="ThreadGroup.delay"></stringProp>
        <boolProp name="ThreadGroup.same_user_on_next_iteration">true</boolProp>
      </ThreadGroup>
      <hashTree>
        <TCPSampler guiclass="TCPSamplerGui" testclass="TCPSampler" testname="Socket.IO Connection Test" enabled="true">
          <stringProp name="TCPSampler.server">localhost</stringProp>
          <stringProp name="TCPSampler.port">3001</stringProp>
          <stringProp name="TCPSampler.connectTimeout">5000</stringProp>
          <stringProp name="TCPSampler.responseTimeout">5000</stringProp>
          <stringProp name="TCPSampler.reUseConnection">false</stringProp>
          <stringProp name="TCPSampler.closeConnection">false</stringProp>
          <stringProp name="TCPSampler.nodelay">false</stringProp>
          <stringProp name="TCPSampler.request">GET /socket.io/?EIO=4&amp;transport=polling&amp;t=${__time()} HTTP/1.1&#xd;&#xa;Host: localhost:3001&#xd;&#xa;Connection: keep-alive&#xd;&#xa;User-Agent: JMeter/${__jmeter_version}&#xd;&#xa;&#xd;&#xa;</stringProp>
          <stringProp name="TCPSampler.classname">TCPClientImpl</stringProp>
        </TCPSampler>
        <hashTree/>
        <TCPSampler guiclass="TCPSamplerGui" testclass="TCPSampler" testname="Join Project Room" enabled="true">
          <stringProp name="TCPSampler.server">localhost</stringProp>
          <stringProp name="TCPSampler.port">3001</stringProp>
          <stringProp name="TCPSampler.connectTimeout">5000</stringProp>
          <stringProp name="TCPSampler.responseTimeout">5000</stringProp>
          <stringProp name="TCPSampler.reUseConnection">true</stringProp>
          <stringProp name="TCPSampler.closeConnection">false</stringProp>
          <stringProp name="TCPSampler.nodelay">false</stringProp>
          <stringProp name="TCPSampler.request">42["join",{"projectId":"${projectId}","userId":"user_${__threadNum}"}]</stringProp>
          <stringProp name="TCPSampler.classname">TCPClientImpl</stringProp>
        </TCPSampler>
        <hashTree/>
        <TCPSampler guiclass="TCPSamplerGui" testclass="TCPSampler" testname="Send Chat Message" enabled="true">
          <stringProp name="TCPSampler.server">localhost</stringProp>
          <stringProp name="TCPSampler.port">3001</stringProp>
          <stringProp name="TCPSampler.connectTimeout">5000</stringProp>
          <stringProp name="TCPSampler.responseTimeout">5000</stringProp>
          <stringProp name="TCPSampler.reUseConnection">true</stringProp>
          <stringProp name="TCPSampler.closeConnection">false</stringProp>
          <stringProp name="TCPSampler.nodelay">false</stringProp>
          <stringProp name="TCPSampler.request">42["message",{"projectId":"${projectId}","message":"Performance test message from user ${__threadNum}","userId":"user_${__threadNum}"}]</stringProp>
          <stringProp name="TCPSampler.classname">TCPClientImpl</stringProp>
        </TCPSampler>
        <hashTree/>
        <TCPSampler guiclass="TCPSamplerGui" testclass="TCPSampler" testname="Add File Node" enabled="true">
          <stringProp name="TCPSampler.server">localhost</stringProp>
          <stringProp name="TCPSampler.port">3001</stringProp>
          <stringProp name="TCPSampler.connectTimeout">5000</stringProp>
          <stringProp name="TCPSampler.responseTimeout">5000</stringProp>
          <stringProp name="TCPSampler.reUseConnection">true</stringProp>
          <stringProp name="TCPSampler.closeConnection">false</stringProp>
          <stringProp name="TCPSampler.nodelay">false</stringProp>
          <stringProp name="TCPSampler.request">42["file_update",{"projectId":"${projectId}","filePath":"test_file_${__threadNum}.js","content":"console.log('Test content ${__threadNum}');","userId":"user_${__threadNum}"}]</stringProp>
          <stringProp name="TCPSampler.classname">TCPClientImpl</stringProp>
        </TCPSampler>
        <hashTree/>
        <TCPSampler guiclass="TCPSamplerGui" testclass="TCPSampler" testname="Close Connection" enabled="true">
          <stringProp name="TCPSampler.server">localhost</stringProp>
          <stringProp name="TCPSampler.port">3001</stringProp>
          <stringProp name="TCPSampler.connectTimeout">5000</stringProp>
          <stringProp name="TCPSampler.responseTimeout">5000</stringProp>
          <stringProp name="TCPSampler.reUseConnection">true</stringProp>
          <stringProp name="TCPSampler.closeConnection">true</stringProp>
          <stringProp name="TCPSampler.nodelay">false</stringProp>
          <stringProp name="TCPSampler.request">42["disconnect",{"projectId":"${projectId}","userId":"user_${__threadNum}"}]</stringProp>
          <stringProp name="TCPSampler.classname">TCPClientImpl</stringProp>
        </TCPSampler>
        <hashTree/>
      </hashTree>
    </hashTree>
  </hashTree>
</jmeterTestPlan>